<!-- Generated by SpecStory -->

# api_call (2025-04-23 16:56:21)

_**User**_

請整理一份 API 呼叫列表，並儲存為 api_doc.md

---

_**Assistant**_

我將幫您整理一份 API 呼叫列表並儲存為 api_doc.md 文件。首先，我需要找出專案中的 API 端點資訊。

---

<details>
            <summary>Searched codebase "API endpoints routes handlers" • **25** results</summary>
        
| File | Lines |
|------|-------|
| `ndscheduler/server/handlers/executions.py` | L185-223 |
| `ndscheduler/server/handlers/executions.py` | L105-128 |
| `ndscheduler/server/handlers/base.py` | L1-57 |
| `ndscheduler/server/server.py` | L64-109 |
| `ndscheduler/server/handlers/users.py` | L170-204 |
| `ndscheduler/server/handlers/users.py` | L473-518 |
| `ndscheduler/server/handlers/categories.py` | L440-453 |
| `ndscheduler/server/handlers/README.md` | L81-188 |
| `ndscheduler/server/handlers/users.py` | L276-312 |
| `ndscheduler/server/handlers/README.md` | L188-285 |
| `ndscheduler/server/handlers/README.md` | L670-748 |
| `ndscheduler/server/handlers/categories.py` | L169-219 |
| `ndscheduler/server/handlers/auth.py` | L109-136 |
| `ndscheduler/server/handlers/users.py` | L571-609 |
| `ndscheduler/server/handlers/users.py` | L411-473 |
| `ndscheduler/server/handlers/README.md` | L399-501 |
| `ndscheduler/server/handlers/README.md` | L285-399 |
| `ndscheduler/server/server.py` | L1-31 |
| `ndscheduler/server/handlers/README.md` | L501-579 |
| `ndscheduler/server/handlers/jobs.py` | L92-146 |
| `ndscheduler/server/handlers/auth.py` | L1-33 |
| `ndscheduler/server/handlers/README.md` | L579-670 |
| `ndscheduler/server/handlers/executions.py` | L1-58 |
| `ndscheduler/server/handlers/auth.py` | L150-181 |
| `ndscheduler/server/handlers/README.md` | L1-81 |

</details>

---

讓我繼續尋找更多 API 相關資訊:

---

<details>
            <summary>Searched codebase "API authentication login handler" • **25** results</summary>
        
| File | Lines |
|------|-------|
| `ndscheduler/server/handlers/auth.py` | L109-136 |
| `ndscheduler/server/handlers/base.py` | L1-57 |
| `ndscheduler/server/handlers/auth.py` | L1-33 |
| `ndscheduler/server/handlers/auth.py` | L33-84 |
| `ndscheduler/server/handlers/auth.py` | L84-109 |
| `ndscheduler/templates/login.html` | L36-74 |
| `ndscheduler/server/server.py` | L64-109 |
| `ndscheduler/server/handlers/auth.py` | L181-232 |
| `ndscheduler/server/handlers/auth.py` | L150-181 |
| `ndscheduler/server/handlers/base.py` | L57-92 |
| `ndscheduler/static/js/auth-verification.js` | L56-99 |
| `ndscheduler/server/handlers/base.py` | L92-127 |
| `ndscheduler/server/handlers/users.py` | L170-204 |
| `ndscheduler/static/js/auth.js` | L77-121 |
| `ndscheduler/server/handlers/users.py` | L276-312 |
| `ndscheduler/server/handlers/index.py` | L30-72 |
| `ndscheduler/static/js/auth.js` | L121-171 |
| `ndscheduler/server/handlers/auth.py` | L136-150 |
| `ndscheduler/server/handlers/users.py` | L571-609 |
| `ndscheduler/server/handlers/auth.py` | L232-237 |
| `ndscheduler/server/handlers/users.py` | L473-518 |
| `ndscheduler/static/js/auth-verification.js` | L1-56 |
| `ndscheduler/static/js/auth.js` | L36-77 |
| `ndscheduler/server/handlers/users.py` | L1-52 |
| `ndscheduler/server/handlers/users.py` | L411-473 |

</details>

---

讓我搜尋更多與 jobs 相關的 API 資訊：

---

<details>
            <summary>Searched codebase "jobs API handler" • **25** results</summary>
        
| File | Lines |
|------|-------|
| `ndscheduler/server/handlers/jobs.py` | L1-35 |
| `ndscheduler/static/js/models/jobs.js` | L25-104 |
| `ndscheduler/server/handlers/README.md` | L188-285 |
| `ndscheduler/server/handlers/README.md` | L81-188 |
| `ndscheduler/server/handlers/README.md` | L285-399 |
| `ndscheduler/server/handlers/executions.py` | L185-223 |
| `ndscheduler/server/handlers/jobs.py` | L92-146 |
| `ndscheduler/server/handlers/jobs_test.py` | L137-157 |
| `ndscheduler/static/js/config.js` | L1-18 |
| `ndscheduler/static/js/models/jobs.js` | L104-172 |
| `ndscheduler/server/handlers/index.py` | L1-30 |
| `ndscheduler/server/handlers/jobs_test.py` | L98-137 |
| `ndscheduler/server/handlers/jobs_test.py` | L1-15 |
| `ndscheduler/server/handlers/jobs_test.py` | L28-68 |
| `ndscheduler/static/js/views/jobs/table-view.js` | L39-106 |
| `ndscheduler/server/handlers/README.md` | L399-501 |
| `ndscheduler/server/handlers/jobs.py` | L186-246 |
| `ndscheduler/server/handlers/README.md` | L1-81 |
| `ndscheduler/server/handlers/jobs.py` | L146-186 |
| `ndscheduler/server/handlers/jobs.py` | L536-563 |
| `ndscheduler/server/handlers/jobs.py` | L430-458 |
| `ndscheduler/server/handlers/jobs_test.py` | L68-98 |
| `ndscheduler/static/js/models/jobs.js` | L172-245 |
| `ndscheduler/server/handlers/executions.py` | L1-58 |
| `ndscheduler/server/handlers/jobs.py` | L497-536 |

</details>

---

讓我們繼續查找有關執行紀錄(executions)的 API 端點：

---

<details>
            <summary>Searched codebase "executions API endpoints" • **25** results</summary>
        
| File | Lines |
|------|-------|
| `ndscheduler/server/handlers/executions.py` | L105-128 |
| `ndscheduler/server/handlers/README.md` | L501-579 |
| `ndscheduler/static/js/models/executions.js` | L25-81 |
| `ndscheduler/server/handlers/README.md` | L579-670 |
| `ndscheduler/server/handlers/executions.py` | L185-223 |
| `ndscheduler/server/handlers/executions.py` | L1-58 |
| `ndscheduler/server/handlers/README.md` | L399-501 |
| `ndscheduler/corescheduler/datastore/base.py` | L290-317 |
| `ndscheduler/static/js/models/executions.js` | L81-103 |
| `ndscheduler/server/handlers/executions_test.py` | L51-81 |
| `ndscheduler/server/handlers/executions_test.py` | L21-51 |
| `ndscheduler/server/handlers/executions.py` | L58-105 |
| `ndscheduler/server/handlers/README.md` | L670-748 |
| `ndscheduler/server/handlers/executions_test.py` | L1-16 |
| `ndscheduler/static/js/config.js` | L1-18 |
| `ndscheduler/corescheduler/datastore/base.py` | L576-605 |
| `ndscheduler/corescheduler/datastore/base.py` | L175-220 |
| `ndscheduler/server/handlers/executions_test.py` | L16-21 |
| `ndscheduler/templates/index.html` | L188-209 |
| `ndscheduler/server/handlers/README.md` | L1-81 |
| `ndscheduler/static/js/views/executions/table-view.js` | L35-97 |
| `ndscheduler/corescheduler/datastore/base.py` | L220-251 |
| `ndscheduler/static/js/views/executions/filter-view.js` | L25-45 |
| `ndscheduler/static/js/views/executions/table-view.js` | L97-125 |
| `ndscheduler/static/js/models/execution.js` | L25-89 |

</details>

---

讓我們再查找一下 audit logs 的 API 端點：

---

<details>
            <summary>Searched codebase "audit logs API handler" • **25** results</summary>
        
| File | Lines |
|------|-------|
| `ndscheduler/server/handlers/audit_logs.py` | L1-41 |
| `ndscheduler/server/handlers/README.md` | L670-748 |
| `ndscheduler/server/handlers/audit_logs.py` | L41-75 |
| `ndscheduler/server/handlers/audit_logs.py` | L109-152 |
| `ndscheduler/corescheduler/datastore/base.py` | L350-384 |
| `ndscheduler/corescheduler/datastore/base.py` | L605-634 |
| `ndscheduler/corescheduler/datastore/tables.py` | L66-91 |
| `ndscheduler/corescheduler/datastore/base.py` | L384-427 |
| `ndscheduler/corescheduler/constants.py` | L62-71 |
| `ndscheduler/server/handlers/audit_logs.py` | L75-109 |
| `ndscheduler/corescheduler/datastore/base.py` | L317-350 |
| `ndscheduler/server/server.py` | L1-31 |
| `ndscheduler/corescheduler/datastore/base.py` | L427-453 |
| `ndscheduler/server/handlers/jobs.py` | L497-536 |
| `ndscheduler/templates/index.html` | L209-230 |
| `ndscheduler/corescheduler/core/base.py` | L320-355 |
| `ndscheduler/server/handlers/jobs.py` | L458-497 |
| `ndscheduler/static/js/models/logs.js` | L25-70 |
| `ndscheduler/server/handlers/README.md` | L1-81 |
| `tests/ndscheduler/corescheduler/datastore/test_base.py` | L102-133 |
| `ndscheduler/server/handlers/executions.py` | L128-185 |
| `ndscheduler/server/handlers/base.py` | L1-57 |
| `ndscheduler/server/handlers/jobs.py` | L186-246 |
| `ndscheduler/server/server.py` | L64-109 |
| `ndscheduler/corescheduler/constants.py` | L1-62 |

</details>

---

現在讓我們找一下關於 categories 的 API 端點：

---

<details>
            <summary>Searched codebase "categories API handler" • **25** results</summary>
        
| File | Lines |
|------|-------|
| `ndscheduler/static/js/models/categories.js` | L22-75 |
| `ndscheduler/server/handlers/categories.py` | L169-219 |
| `ndscheduler/static/js/models/categories.js` | L75-133 |
| `ndscheduler/server/handlers/categories.py` | L1-52 |
| `ndscheduler/server/handlers/categories.py` | L114-169 |
| `ndscheduler/server/handlers/categories.py` | L219-274 |
| `ndscheduler/server/handlers/categories.py` | L440-453 |
| `ndscheduler/server/handlers/categories.py` | L376-440 |
| `ndscheduler/static/js/views/categories/table-view.js` | L245-298 |
| `ndscheduler/server/handlers/categories.py` | L274-335 |
| `ndscheduler/server/handlers/categories.py` | L52-114 |
| `ndscheduler/corescheduler/datastore/base.py` | L533-576 |
| `ndscheduler/static/js/views/categories/table-view.js` | L31-59 |
| `ndscheduler/static/js/views/categories/table-view.js` | L184-245 |
| `ndscheduler/server/handlers/categories.py` | L335-376 |
| `ndscheduler/corescheduler/datastore/tables.py` | L117-140 |
| `ndscheduler/static/js/views/categories/table-view.js` | L59-103 |
| `ndscheduler/static/js/models/categories.js` | L133-144 |
| `ndscheduler/static/js/models/categories.js` | L1-22 |
| `ndscheduler/server/handlers/jobs.py` | L35-92 |
| `ndscheduler/static/js/views/categories/table-view.js` | L103-148 |
| `ndscheduler/static/js/views/categories/table-view.js` | L148-184 |
| `ndscheduler/server/handlers/jobs.py` | L1-35 |
| `ndscheduler/server/handlers/executions.py` | L58-105 |
| `ndscheduler/corescheduler/datastore/base.py` | L136-175 |

</details>

---

讓我們找一下有關用戶 API 的資訊：

---

<details>
            <summary>Searched codebase "current user API" • **25** results</summary>
        
| File | Lines |
|------|-------|
| `ndscheduler/server/handlers/users.py` | L571-609 |
| `ndscheduler/static/js/models/users.js` | L22-89 |
| `ndscheduler/server/handlers/users.py` | L518-571 |
| `ndscheduler/server/handlers/users.py` | L170-204 |
| `ndscheduler/server/handlers/users.py` | L112-170 |
| `ndscheduler/server/handlers/base.py` | L57-92 |
| `ndscheduler/server/handlers/users.py` | L411-473 |
| `ndscheduler/server/handlers/users.py` | L473-518 |
| `ndscheduler/static/js/models/users.js` | L89-144 |
| `ndscheduler/corescheduler/datastore/tables.py` | L91-117 |
| `ndscheduler/server/handlers/users.py` | L276-312 |
| `ndscheduler/static/js/models/user.js` | L25-82 |
| `ndscheduler/server/handlers/users.py` | L1-52 |
| `ndscheduler/static/js/views/users/table-view.js` | L256-316 |
| `ndscheduler/server/handlers/users.py` | L52-112 |
| `ndscheduler/static/js/views/users/table-view.js` | L59-100 |
| `ndscheduler/server/handlers/base.py` | L1-57 |
| `ndscheduler/server/handlers/jobs.py` | L1-35 |
| `ndscheduler/server/handlers/index.py` | L30-72 |
| `ndscheduler/corescheduler/datastore/base.py` | L478-533 |
| `ndscheduler/server/handlers/users.py` | L362-411 |
| `ndscheduler/server/handlers/auth.py` | L181-232 |
| `ndscheduler/server/handlers/auth.py` | L109-136 |
| `ndscheduler/static/js/views/users/table-view.js` | L100-127 |
| `ndscheduler/static/js/views/users/table-view.js` | L202-256 |

</details>

---

現在我有足夠的資訊來為您創建完整的 API 呼叫列表文檔了。

---

```diff
- 
+ # ndscheduler API 呼叫列表
+ 
+ ## 目錄
+ - [身份驗證](#身份驗證)
+ - [作業管理](#作業管理)
+ - [執行記錄](#執行記錄)
+ - [分類管理](#分類管理)
+ - [用戶管理](#用戶管理)
+ - [稽核日誌](#稽核日誌)
+ 
+ ## 身份驗證
+ 
+ ### 登入
+ 
+ **URL**: `/api/v1/auth/login`
+ 
+ **方法**: `POST`
+ 
+ **請求內容**:
+ ```json
+ {
+     "username": "user",
+     "password": "password"
+ }
+ ```
+ 
+ **成功回應**:
+ ```json
+ {
+     "token": "JWT_TOKEN",
+     "user": {
+         "id": "使用者ID",
+         "username": "使用者名稱",
+         "category_id": "分類ID",
+         "is_admin": true,
+         "is_permission": true
+     }
+ }
+ ```
+ 
+ ### 驗證身份
+ 
+ **URL**: `/api/v1/auth/verify`
+ 
+ **方法**: `GET`
+ 
+ **請求標頭**:
+ ```
+ Authorization: Bearer JWT_TOKEN
+ ```
+ 
+ **成功回應**:
+ ```json
+ {
+     "user": {
+         "id": "使用者ID",
+         "username": "使用者名稱",
+         "category_id": "分類ID",
+         "is_admin": true,
+         "is_permission": true
+     }
+ }
+ ```
+ 
+ ## 作業管理
+ 
+ ### 獲取所有作業
+ 
+ **URL**: `/api/v1/jobs`
+ 
+ **方法**: `GET`
+ 
+ **請求標頭**:
+ ```
+ Authorization: Bearer JWT_TOKEN
+ ```
+ 
+ **成功回應**:
+ ```json
+ {
+     "jobs": [
+         {
+             "job_id": "d8f376e858a411e4b6ae22000ac58d05",
+             "job_class_string": "simple_scheduler.jobs.clean_apns.CleanAPNsJob",
+             "name": "Clean APNs",
+             "pub_args": ["arg1", "arg2"],
+             "month": "*",
+             "day_of_week": "*",
+             "day": "*",
+             "hour": "*/1",
+             "minute": "*"
+         },
+         ...
+     ]
+ }
+ ```
+ 
+ ### 獲取單個作業
+ 
+ **URL**: `/api/v1/jobs/{job_id}`
+ 
+ **方法**: `GET`
+ 
+ **請求標頭**:
+ ```
+ Authorization: Bearer JWT_TOKEN
+ ```
+ 
+ **成功回應**:
+ ```json
+ {
+     "job_id": "d8f376e858a411e4b6ae22000ac58d05",
+     "job_class_string": "simple_scheduler.jobs.clean_apns.CleanAPNsJob",
+     "name": "Clean APNs",
+     "pub_args": ["arg1", "arg2"],
+     "month": "*",
+     "day_of_week": "*",
+     "day": "*",
+     "hour": "*/1",
+     "minute": "*"
+ }
+ ```
+ 
+ ### 新增作業
+ 
+ **URL**: `/api/v1/jobs`
+ 
+ **方法**: `POST`
+ 
+ **請求標頭**:
+ ```
+ Authorization: Bearer JWT_TOKEN
+ Content-Type: application/json
+ ```
+ 
+ **請求內容**:
+ ```json
+ {
+     "job_class_string": "simple_scheduler.jobs.sample_job.AwesomeJob",
+     "name": "API 新增的任務",
+     "pub_args": ["API參數1", "API參數2"],
+     "minute": "*/5",
+     "month": "*",
+     "day_of_week": "*",
+     "day": "*",
+     "hour": "*"
+ }
+ ```
+ 
+ **成功回應**:
+ ```json
+ {
+     "job_id": "d8f376e858a411e4b6ae32000ac58d05"
+ }
+ ```
+ 
+ ### 修改作業
+ 
+ **URL**: `/api/v1/jobs/{job_id}`
+ 
+ **方法**: `PUT`
+ 
+ **請求標頭**:
+ ```
+ Authorization: Bearer JWT_TOKEN
+ Content-Type: application/json
+ ```
+ 
+ **請求內容**:
+ ```json
+ {
+     "job_class_string": "simple_scheduler.jobs.sample_job.AwesomeJob",
+     "name": "API 修改的任務",
+     "pub_args": ["API參數1", "API參數2"],
+     "minute": "*/10",
+     "month": "*",
+     "day_of_week": "*",
+     "day": "*",
+     "hour": "*"
+ }
+ ```
+ 
+ **成功回應**:
+ ```json
+ {
+     "job_id": "d8f376e858a411e4b6ae22000ac58d05"
+ }
+ ```
+ 
+ ### 刪除作業
+ 
+ **URL**: `/api/v1/jobs/{job_id}`
+ 
+ **方法**: `DELETE`
+ 
+ **請求標頭**:
+ ```
+ Authorization: Bearer JWT_TOKEN
+ ```
+ 
+ **成功回應**:
+ ```json
+ {
+     "job_id": "d8f376e858a411e4b6ae22000ac58d05"
+ }
+ ```
+ 
+ ### 暫停作業
+ 
+ **URL**: `/api/v1/jobs/{job_id}`
+ 
+ **方法**: `PATCH`
+ 
+ **請求標頭**:
+ ```
+ Authorization: Bearer JWT_TOKEN
+ ```
+ 
+ **成功回應**:
+ ```json
+ {
+     "job_id": "d8f376e858a411e4b6ae22000ac58d05"
+ }
+ ```
+ 
+ ### 恢復作業
+ 
+ **URL**: `/api/v1/jobs/{job_id}`
+ 
+ **方法**: `OPTIONS`
+ 
+ **請求標頭**:
+ ```
+ Authorization: Bearer JWT_TOKEN
+ ```
+ 
+ **成功回應**:
+ ```json
+ {
+     "job_id": "d8f376e858a411e4b6ae22000ac58d05"
+ }
+ ```
+ 
+ ## 執行記錄
+ 
+ ### 獲取指定時間範圍內的執行記錄
+ 
+ **URL**: `/api/v1/executions?time_range_start={start_time}&time_range_end={end_time}`
+ 
+ **方法**: `GET`
+ 
+ **請求標頭**:
+ ```
+ Authorization: Bearer JWT_TOKEN
+ ```
+ 
+ **請求參數**:
+ - `time_range_start`: ISO格式的開始時間，例如 `2023-01-01T00:00:00.000Z`
+ - `time_range_end`: ISO格式的結束時間，例如 `2023-01-02T00:00:00.000Z`
+ 
+ **成功回應**:
+ ```json
+ {
+     "executions": [
+         {
+             "description": "",
+             "execution_id": "7252d7a6a80f11e58bcc02ba903740c3",
+             "hostname": "",
+             "job": {
+                 "day": "*",
+                 "day_of_week": "*",
+                 "hour": "*",
+                 "job_id": "bb0dec52797f11e4a14122000a150f89",
+                 "minute": "*/5",
+                 "month": "*",
+                 "name": "Poll sendgrid for bounces and spamreports",
+                 "pub_args": [],
+                 "job_class_string": "simple_scheduler.jobs.sample_job.ImportDataJob",
+                 "week": "*"
+             },
+             "pid": -1,
+             "scheduled_time": "2023-01-01T18:20:05.604708+00:00",
+             "state": "scheduled",
+             "task_id": "",
+             "updated_time": "2023-01-01T18:20:05.604732+00:00"
+         },
+         ...
+     ]
+ }
+ ```
+ 
+ ### 獲取單個執行記錄
+ 
+ **URL**: `/api/v1/executions/{execution_id}`
+ 
+ **方法**: `GET`
+ 
+ **請求標頭**:
+ ```
+ Authorization: Bearer JWT_TOKEN
+ ```
+ 
+ **成功回應**:
+ ```json
+ {
+     "description": "",
+     "execution_id": "7252d7a6a80f11e58bcc02ba903740c3",
+     "hostname": "",
+     "job": {
+         "day": "*",
+         "day_of_week": "*",
+         "hour": "*",
+         "job_id": "bb0dec52797f11e4a14122000a150f89",
+         "minute": "*/5",
+         "month": "*",
+         "name": "Poll sendgrid for bounces and spamreports",
+         "pub_args": [],
+         "job_class_string": "simple_scheduler.jobs.sample_job.ImportDataJob",
+         "week": "*"
+     },
+     "pid": -1,
+     "scheduled_time": "2023-01-01T18:20:05.604708+00:00",
+     "state": "scheduled",
+     "task_id": "",
+     "updated_time": "2023-01-01T18:20:05.604732+00:00"
+ }
+ ```
+ 
+ ### 立即執行作業
+ 
+ **URL**: `/api/v1/executions/{job_id}`
+ 
+ **方法**: `POST`
+ 
+ **請求標頭**:
+ ```
+ Authorization: Bearer JWT_TOKEN
+ ```
+ 
+ **成功回應**:
+ ```json
+ {
+     "execution_id": "d8f376e858a411e4b6ae32000ac58d05"
+ }
+ ```
+ 
+ ## 分類管理
+ 
+ ### 獲取所有分類
+ 
+ **URL**: `/api/v1/categories`
+ 
+ **方法**: `GET`
+ 
+ **請求標頭**:
+ ```
+ Authorization: Bearer JWT_TOKEN
+ ```
+ 
+ **成功回應**:
+ ```json
+ {
+     "categories": [
+         {
+             "id": 1,
+             "name": "系統管理",
+             "description": "系統管理類別的任務",
+             "created_at": "2023-01-01T00:00:00.000Z",
+             "updated_at": "2023-01-01T00:00:00.000Z"
+         },
+         ...
+     ]
+ }
+ ```
+ 
+ ### 獲取單個分類
+ 
+ **URL**: `/api/v1/categories/{category_id}`
+ 
+ **方法**: `GET`
+ 
+ **請求標頭**:
+ ```
+ Authorization: Bearer JWT_TOKEN
+ ```
+ 
+ **成功回應**:
+ ```json
+ {
+     "id": 1,
+     "name": "系統管理",
+     "description": "系統管理類別的任務",
+     "created_at": "2023-01-01T00:00:00.000Z",
+     "updated_at": "2023-01-01T00:00:00.000Z"
+ }
+ ```
+ 
+ ### 新增分類
+ 
+ **URL**: `/api/v1/categories`
+ 
+ **方法**: `POST`
+ 
+ **請求標頭**:
+ ```
+ Authorization: Bearer JWT_TOKEN
+ Content-Type: application/json
+ ```
+ 
+ **請求內容**:
+ ```json
+ {
+     "name": "新分類名稱",
+     "description": "新分類的描述"
+ }
+ ```
+ 
+ **成功回應**:
+ ```json
+ {
+     "id": 2
+ }
+ ```
+ 
+ ### 修改分類
+ 
+ **URL**: `/api/v1/categories/{category_id}`
+ 
+ **方法**: `PUT`
+ 
+ **請求標頭**:
+ ```
+ Authorization: Bearer JWT_TOKEN
+ Content-Type: application/json
+ ```
+ 
+ **請求內容**:
+ ```json
+ {
+     "name": "修改後的分類名稱",
+     "description": "修改後的分類描述"
+ }
+ ```
+ 
+ **成功回應**:
+ ```json
+ {
+     "id": 2
+ }
+ ```
+ 
+ ### 刪除分類
+ 
+ **URL**: `/api/v1/categories/{category_id}`
+ 
+ **方法**: `DELETE`
+ 
+ **請求標頭**:
+ ```
+ Authorization: Bearer JWT_TOKEN
+ ```
+ 
+ **成功回應**:
+ ```json
+ {
+     "id": 2
+ }
+ ```
+ 
+ ## 用戶管理
+ 
+ ### 獲取所有用戶
+ 
+ **URL**: `/api/v1/users`
+ 
+ **方法**: `GET`
+ 
+ **請求標頭**:
+ ```
+ Authorization: Bearer JWT_TOKEN
+ ```
+ 
+ **成功回應**:
+ ```json
+ {
+     "users": [
+         {
+             "id": 1,
+             "username": "admin",
+             "category_id": 0,
+             "is_admin": true,
+             "is_permission": true,
+             "created_at": "2023-01-01T00:00:00.000Z",
+             "updated_at": "2023-01-01T00:00:00.000Z"
+         },
+         ...
+     ]
+ }
+ ```
+ 
+ ### 獲取單個用戶
+ 
+ **URL**: `/api/v1/users/{user_id}`
+ 
+ **方法**: `GET`
+ 
+ **請求標頭**:
+ ```
+ Authorization: Bearer JWT_TOKEN
+ ```
+ 
+ **成功回應**:
+ ```json
+ {
+     "id": 1,
+     "username": "admin",
+     "category_id": 0,
+     "is_admin": true,
+     "is_permission": true,
+     "created_at": "2023-01-01T00:00:00.000Z",
+     "updated_at": "2023-01-01T00:00:00.000Z"
+ }
+ ```
+ 
+ ### 獲取當前用戶信息
+ 
+ **URL**: `/api/v1/users/current`
+ 
+ **方法**: `GET`
+ 
+ **請求標頭**:
+ ```
+ Authorization: Bearer JWT_TOKEN
+ ```
+ 
+ **成功回應**:
+ ```json
+ {
+     "id": 1,
+     "username": "admin",
+     "category_id": 0,
+     "is_admin": true,
+     "is_permission": true,
+     "created_at": "2023-01-01T00:00:00.000Z",
+     "updated_at": "2023-01-01T00:00:00.000Z"
+ }
+ ```
+ 
+ ### 新增用戶
+ 
+ **URL**: `/api/v1/users`
+ 
+ **方法**: `POST`
+ 
+ **請求標頭**:
+ ```
+ Authorization: Bearer JWT_TOKEN
+ Content-Type: application/json
+ ```
+ 
+ **請求內容**:
+ ```json
+ {
+     "username": "新用戶名稱",
+     "password": "密碼",
+     "category_id": 1,
+     "is_admin": false,
+     "is_permission": true
+ }
+ ```
+ 
+ **成功回應**:
+ ```json
+ {
+     "id": 2
+ }
+ ```
+ 
+ ### 修改用戶
+ 
+ **URL**: `/api/v1/users/{user_id}`
+ 
+ **方法**: `PUT`
+ 
+ **請求標頭**:
+ ```
+ Authorization: Bearer JWT_TOKEN
+ Content-Type: application/json
+ ```
+ 
+ **請求內容**:
+ ```json
+ {
+     "username": "修改後的用戶名稱",
+     "password": "新密碼",
+     "category_id": 2,
+     "is_admin": true,
+     "is_permission": true
+ }
+ ```
+ 
+ **成功回應**:
+ ```json
+ {
+     "id": 2
+ }
+ ```
+ 
+ ### 刪除用戶
+ 
+ **URL**: `/api/v1/users/{user_id}`
+ 
+ **方法**: `DELETE`
+ 
+ **請求標頭**:
+ ```
+ Authorization: Bearer JWT_TOKEN
+ ```
+ 
+ **成功回應**:
+ ```json
+ {
+     "id": 2
+ }
+ ```
+ 
+ ## 稽核日誌
+ 
+ ### 獲取稽核日誌
+ 
+ **URL**: `/api/v1/logs?time_range_start={start_time}&time_range_end={end_time}`
+ 
+ **方法**: `GET`
+ 
+ **請求標頭**:
+ ```
+ Authorization: Bearer JWT_TOKEN
+ ```
+ 
+ **請求參數**:
+ - `time_range_start`: ISO格式的開始時間，例如 `2023-01-01T00:00:00.000Z`
+ - `time_range_end`: ISO格式的結束時間，例如 `2023-01-02T00:00:00.000Z`
+ 
+ **成功回應**:
+ ```json
+ {
+     "logs": [
+         {
+             "job_id": "5052939245f611e5bef70610a8516d8b",
+             "job_name": "Import Data Job",
+             "event": "custom_run",
+             "user": "admin",
+             "description": "ad9bb256a2ee11e5bbf702ba903740c3",
+             "created_time": "2023-01-01T01:20:23.843895+00:00"
+         },
+         ...
+     ],
+     "total": 10
+ }
+ ``` 
```

---

我已經成功地為您整理了一份完整的 API 呼叫列表，並將其儲存為 api_doc.md 文件。這份文檔包含了所有主要 API 端點的詳細資訊，包括：

1. 身份驗證 API：登入和驗證機制
2. 作業管理 API：查詢、新增、修改、刪除、暫停和恢復作業
3. 執行記錄 API：查詢執行記錄和立即執行作業
4. 分類管理 API：查詢、新增、修改和刪除分類
5. 用戶管理 API：查詢、新增、修改和刪除用戶，以及獲取當前用戶資訊
6. 稽核日誌 API：查詢系統操作日誌

每個 API 端點都包含了 URL、HTTP 方法、請求頭部、請求參數/內容和成功回應的格式，方便開發人員參考使用。

---



---

